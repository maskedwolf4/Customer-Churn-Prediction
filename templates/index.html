<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Customer Attrition Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="header-banner">
                    <h1><i class="fas fa-credit-card"></i> Credit Card Customer Attrition Predictor</h1>
                    <p>Predict customer churn risk using advanced machine learning</p>
                </div>
            </div>
        </div>
        
        <div class="row justify-content-center mt-4">
            <div class="col-lg-10">
                <div class="card shadow-lg">
                    <div class="card-body p-4">
                        <form id="predictionForm">
                            
                            <!-- Customer Demographics -->
                            <h4 class="section-title"><i class="fas fa-user"></i> Customer Demographics</h4>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="customer_age" class="form-label">Customer Age</label>
                                    <input type="number" class="form-control" id="customer_age" name="customer_age" required min="18" max="100" value="45">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="gender" class="form-label">Gender</label>
                                    <select class="form-select" id="gender" name="gender" required>
                                        <option value="">Select</option>
                                        <option value="M">Male</option>
                                        <option value="F">Female</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="dependent_count" class="form-label">Dependent Count</label>
                                    <input type="number" class="form-control" id="dependent_count" name="dependent_count" required min="0" max="10" value="2">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="education_level" class="form-label">Education Level</label>
                                    <select class="form-select" id="education_level" name="education_level" required>
                                        <option value="">Select</option>
                                        <option value="Doctorate">Doctorate</option>
                                        <option value="Post-Graduate">Post-Graduate</option>
                                        <option value="Graduate">Graduate</option>
                                        <option value="High School">High School</option>
                                        <option value="Uneducated">Uneducated</option>
                                        <option value="Unknown">Unknown</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="marital_status" class="form-label">Marital Status</label>
                                    <select class="form-select" id="marital_status" name="marital_status" required>
                                        <option value="">Select</option>
                                        <option value="Single">Single</option>
                                        <option value="Married">Married</option>
                                        <option value="Divorced">Divorced</option>
                                        <option value="Unknown">Unknown</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="income_category" class="form-label">Income Category</label>
                                    <select class="form-select" id="income_category" name="income_category" required>
                                        <option value="">Select</option>
                                        <option value="Less than $40K">Less than $40K</option>
                                        <option value="$40K - $60K">$40K - $60K</option>
                                        <option value="$60K - $80K">$60K - $80K</option>
                                        <option value="$80K - $120K">$80K - $120K</option>
                                        <option value="$120K +">$120K +</option>
                                        <option value="Unknown">Unknown</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="card_category" class="form-label">Card Category</label>
                                    <select class="form-select" id="card_category" name="card_category" required>
                                        <option value="">Select</option>
                                        <option value="Blue">Blue</option>
                                        <option value="Silver">Silver</option>
                                        <option value="Gold">Gold</option>
                                        <option value="Platinum">Platinum</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Account Information -->
                            <h4 class="section-title mt-4"><i class="fas fa-file-alt"></i> Account Information</h4>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="months_on_book" class="form-label">Months on Book</label>
                                    <input type="number" class="form-control" id="months_on_book" name="months_on_book" required min="0" value="36">
                                    <small class="form-text text-muted">Period of relationship</small>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="total_relationship_count" class="form-label">Total Relationship Count</label>
                                    <input type="number" class="form-control" id="total_relationship_count" name="total_relationship_count" required min="1" max="10" value="5">
                                    <small class="form-text text-muted">Number of products</small>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="months_inactive" class="form-label">Months Inactive (12 mon)</label>
                                    <input type="number" class="form-control" id="months_inactive" name="months_inactive" required min="0" max="12" value="2">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="contacts_count" class="form-label">Contacts Count (12 mon)</label>
                                    <input type="number" class="form-control" id="contacts_count" name="contacts_count" required min="0" max="12" value="3">
                                </div>
                            </div>
                            
                            <!-- Credit Information -->
                            <h4 class="section-title mt-4"><i class="fas fa-dollar-sign"></i> Credit Information</h4>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="credit_limit" class="form-label">Credit Limit ($)</label>
                                    <input type="number" class="form-control" id="credit_limit" name="credit_limit" required min="0" step="0.01" value="10000">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="avg_open_to_buy" class="form-label">Avg Open To Buy ($)</label>
                                    <input type="number" class="form-control" id="avg_open_to_buy" name="avg_open_to_buy" required min="0" step="0.01" value="7500">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="total_revolving_bal" class="form-label">Total Revolving Balance ($)</label>
                                    <input type="number" class="form-control" id="total_revolving_bal" name="total_revolving_bal" required min="0" step="0.01" value="2500">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="avg_utilization_ratio" class="form-label">Avg Utilization Ratio</label>
                                    <input type="number" class="form-control" id="avg_utilization_ratio" name="avg_utilization_ratio" required min="0" max="1" step="0.001" value="0.25">
                                    <small class="form-text text-muted">Value between 0 and 1</small>
                                </div>
                            </div>
                            
                            <!-- Transaction Information -->
                            <h4 class="section-title mt-4"><i class="fas fa-exchange-alt"></i> Transaction Information</h4>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="total_trans_amt" class="form-label">Total Transaction Amount ($)</label>
                                    <input type="number" class="form-control" id="total_trans_amt" name="total_trans_amt" required min="0" step="0.01" value="5000">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="total_trans_ct" class="form-label">Total Transaction Count</label>
                                    <input type="number" class="form-control" id="total_trans_ct" name="total_trans_ct" required min="0" value="60">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="total_amt_chng" class="form-label">Total Amt Change Q4/Q1</label>
                                    <input type="number" class="form-control" id="total_amt_chng" name="total_amt_chng" required step="0.001" value="0.8">
                                    <small class="form-text text-muted">Change ratio</small>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="total_ct_chng" class="form-label">Total Count Change Q4/Q1</label>
                                    <input type="number" class="form-control" id="total_ct_chng" name="total_ct_chng" required step="0.001" value="0.7">
                                    <small class="form-text text-muted">Change ratio</small>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 mt-4">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-chart-line"></i> Predict Attrition Risk
                                </button>
                            </div>
                        </form>
                        
                        <!-- Results Section -->
                        <div id="result" class="mt-5" style="display: none;">
                            <div class="result-card">
                                <div class="result-header" id="resultHeader">
                                    <h3 id="resultTitle"></h3>
                                </div>
                                <div class="result-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="metric-card">
                                                <div class="metric-icon attrition">
                                                    <i class="fas fa-exclamation-triangle"></i>
                                                </div>
                                                <div class="metric-details">
                                                    <h5>Attrition Probability</h5>
                                                    <h2 id="attritionProb"></h2>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="metric-card">
                                                <div class="metric-icon retention">
                                                    <i class="fas fa-check-circle"></i>
                                                </div>
                                                <div class="metric-details">
                                                    <h5>Retention Probability</h5>
                                                    <h2 id="retentionProb"></h2>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="risk-badge mt-3">
                                        <span id="riskLevel"></span>
                                    </div>
                                    <div class="recommendation mt-3" id="recommendation"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
